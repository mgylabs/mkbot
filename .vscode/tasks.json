{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "windows": {
    "options": {
      "shell": {
        "executable": "cmd.exe",
        "args": [
          "/d",
          "/c"
        ]
      }
    }
  },
  "tasks": [
    {
      "label": "build",
      "type": "shell",
      "command": ".venv\\Scripts\\activate && scripts\\build.bat",
      "args": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "build (clean)",
      "type": "shell",
      "command": ".venv\\Scripts\\activate && scripts\\build.bat",
      "args": [
        "--clean"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "Test in Packaged Application",
      "type": "shell",
      "command": ".venv\\Scripts\\activate && scripts\\build.bat",
      "args": [
        "--test-bot"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "package",
      "type": "shell",
      "command": "%programfiles(x86)%\\Inno Setup 6\\iscc.exe",
      "args": [
        "/DNameLong=Mulgyeol MK Bot OSS",
        "/DNameShort=MK Bot OSS",
        "/DVersion=Pre",
        "/DAppExeName=MKBot-OSS.exe",
        "/DAppMutex=MKBotOSS",
        "/DExtDirName=.mkbot-oss",
        "/DDName=mkbot-oss",
        "package\\MKBot.iss"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "Run mkbot.py (debug)",
      "type": "shell",
      "command": "poetry",
      "args": [
        "run",
        "python",
        "mkbot.py",
        "--debug"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "presentation": {
        "panel": "new"
      },
      "problemMatcher": [
        {
          "pattern": {
            "regexp": ".",
            "file": 1,
            "location": 2,
            "message": 3
          },
          "background": {
            "activeOnStart": true,
            "beginsPattern": ".",
            "endsPattern": "."
          }
        }
      ],
      "isBackground": true,
      "group": {
        "kind": "test",
        "isDefault": true
      }
    },
    {
      "label": "Stop mkbot.py (debug)",
      "type": "shell",
      "command": "echo ${input:terminate_mkbot}",
      "presentation": {
        "close": true
      }
    },
    {
      "label": "Restart mkbot.py (debug)",
      "dependsOn": [
        "Stop mkbot.py (debug)",
        "Run mkbot.py (debug)"
      ],
      "dependsOrder": "sequence"
    }
  ],
  "inputs": [
    {
      "id": "terminate_mkbot",
      "type": "command",
      "command": "workbench.action.tasks.terminate",
      "args": "Run mkbot.py (debug)"
    }
  ]
}
